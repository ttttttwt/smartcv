{% extends "base.html" %} {% block title %}Đăng ký - Smart CV{% endblock %} {%
block content %}
<div
  class="min-h-screen bg-gradient-to-br from-emerald-50 via-white to-green-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"
>
  <div class="max-w-md w-full">
    <!-- Logo & Header -->
    <div class="text-center mb-8">
      <div
        class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-secondary to-emerald-600 rounded-2xl shadow-lg mb-4"
      >
        <i class="fas fa-user-plus text-white text-2xl"></i>
      </div>
      <h1 class="text-3xl font-bold text-gray-900 mb-2">Tạo tài khoản</h1>
      <p class="text-gray-600">Bắt đầu hành trình tạo CV chuyên nghiệp</p>
    </div>

    <!-- Register Form -->
    <div class="bg-white rounded-3xl shadow-xl p-8 border border-gray-100">
      <form
        class="space-y-5"
        action="/register"
        method="POST"
        id="registerForm"
      >
        <!-- Full Name -->
        <div class="space-y-1">
          <label
            for="full_name"
            class="block text-sm font-medium text-gray-700 mb-2"
          >
            Họ và tên <span class="text-red-500">*</span>
          </label>
          <div class="relative">
            <div
              class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
            >
              <i class="fas fa-user text-gray-400"></i>
            </div>
            <input
              id="full_name"
              name="full_name"
              type="text"
              autocomplete="name"
              required
              class="block w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl shadow-sm placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-2 focus:ring-secondary focus:border-transparent transition-all duration-200 hover:border-gray-300"
              placeholder="Nguyễn Văn A"
            />
            <div
              id="fullNameFeedback"
              class="hidden absolute right-3 top-1/2 transform -translate-y-1/2"
            >
              <i class="fas fa-check text-green-500"></i>
            </div>
          </div>
        </div>

        <!-- Email -->
        <div class="space-y-1">
          <label
            for="email"
            class="block text-sm font-medium text-gray-700 mb-2"
          >
            Email <span class="text-red-500">*</span>
          </label>
          <div class="relative">
            <div
              class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
            >
              <i class="fas fa-envelope text-gray-400"></i>
            </div>
            <input
              id="email"
              name="email"
              type="email"
              autocomplete="email"
              required
              class="block w-full pl-10 pr-10 py-3 border border-gray-200 rounded-xl shadow-sm placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-2 focus:ring-secondary focus:border-transparent transition-all duration-200 hover:border-gray-300"
              placeholder="example@gmail.com"
            />
            <div
              id="emailFeedback"
              class="hidden absolute right-3 top-1/2 transform -translate-y-1/2"
            >
              <i class="fas fa-check text-green-500"></i>
            </div>
          </div>
          <div id="emailError" class="hidden text-xs text-red-600 mt-1"></div>
        </div>

        <!-- Password -->
        <div class="space-y-1">
          <label
            for="password"
            class="block text-sm font-medium text-gray-700 mb-2"
          >
            Mật khẩu <span class="text-red-500">*</span>
          </label>
          <div class="relative">
            <div
              class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
            >
              <i class="fas fa-lock text-gray-400"></i>
            </div>
            <input
              id="password"
              name="password"
              type="password"
              autocomplete="new-password"
              required
              class="block w-full pl-10 pr-10 py-3 border border-gray-200 rounded-xl shadow-sm placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-2 focus:ring-secondary focus:border-transparent transition-all duration-200 hover:border-gray-300"
              placeholder="Tối thiểu 8 ký tự"
            />
            <button
              type="button"
              class="absolute inset-y-0 right-0 pr-3 flex items-center"
              onclick="togglePasswordField('password')"
            >
              <i
                id="passwordIcon"
                class="fas fa-eye text-gray-400 hover:text-gray-600 cursor-pointer"
              ></i>
            </button>
          </div>
          <!-- Password Strength Indicator -->
          <div class="mt-2">
            <div class="flex space-x-1">
              <div
                id="strength1"
                class="h-1 w-1/4 bg-gray-200 rounded-full transition-all duration-200"
              ></div>
              <div
                id="strength2"
                class="h-1 w-1/4 bg-gray-200 rounded-full transition-all duration-200"
              ></div>
              <div
                id="strength3"
                class="h-1 w-1/4 bg-gray-200 rounded-full transition-all duration-200"
              ></div>
              <div
                id="strength4"
                class="h-1 w-1/4 bg-gray-200 rounded-full transition-all duration-200"
              ></div>
            </div>
            <p id="strengthText" class="text-xs text-gray-500 mt-1">
              Độ mạnh mật khẩu
            </p>
          </div>
        </div>

        <!-- Confirm Password -->
        <div class="space-y-1">
          <label
            for="confirm_password"
            class="block text-sm font-medium text-gray-700 mb-2"
          >
            Xác nhận mật khẩu <span class="text-red-500">*</span>
          </label>
          <div class="relative">
            <div
              class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
            >
              <i class="fas fa-shield-alt text-gray-400"></i>
            </div>
            <input
              id="confirm_password"
              name="confirm_password"
              type="password"
              autocomplete="new-password"
              required
              class="block w-full pl-10 pr-10 py-3 border border-gray-200 rounded-xl shadow-sm placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-2 focus:ring-secondary focus:border-transparent transition-all duration-200 hover:border-gray-300"
              placeholder="Nhập lại mật khẩu"
            />
            <div
              id="confirmPasswordFeedback"
              class="hidden absolute right-3 top-1/2 transform -translate-y-1/2"
            >
              <i class="fas fa-check text-green-500"></i>
            </div>
          </div>
          <div
            id="confirmPasswordError"
            class="hidden text-xs text-red-600 mt-1"
          ></div>
        </div>

        <!-- Phone (Optional) -->
        <div class="space-y-1">
          <label
            for="phone"
            class="block text-sm font-medium text-gray-700 mb-2"
          >
            Số điện thoại <span class="text-gray-400">(tùy chọn)</span>
          </label>
          <div class="relative">
            <div
              class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
            >
              <i class="fas fa-phone text-gray-400"></i>
            </div>
            <input
              id="phone"
              name="phone"
              type="tel"
              autocomplete="tel"
              class="block w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl shadow-sm placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-2 focus:ring-secondary focus:border-transparent transition-all duration-200 hover:border-gray-300"
              placeholder="0xxx xxx xxx"
            />
          </div>
        </div>

        <!-- Terms Agreement -->
        <div class="flex items-start">
          <div class="flex items-center h-5">
            <input
              id="agree_terms"
              name="agree_terms"
              type="checkbox"
              required
              class="h-4 w-4 text-secondary focus:ring-secondary border-gray-300 rounded transition-all duration-200"
            />
          </div>
          <div class="ml-3 text-sm">
            <label for="agree_terms" class="text-gray-700">
              Tôi đồng ý với
              <a
                href="/terms"
                class="font-medium text-secondary hover:text-emerald-600 transition-colors"
                >Điều khoản sử dụng</a
              >
              và
              <a
                href="/privacy"
                class="font-medium text-secondary hover:text-emerald-600 transition-colors"
                >Chính sách bảo mật</a
              >
            </label>
          </div>
        </div>

        <!-- Submit Button -->
        <button
          type="submit"
          class="group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-xl text-white bg-gradient-to-r from-secondary to-emerald-600 hover:from-green-600 hover:to-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-secondary transform transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed"
          id="submitBtn"
        >
          <span class="absolute left-0 inset-y-0 flex items-center pl-3">
            <i
              class="fas fa-user-plus text-green-200 group-hover:text-white transition-colors"
            ></i>
          </span>
          Tạo tài khoản
        </button>

        <!-- Social Register -->
        <div class="relative my-6">
          <div class="absolute inset-0 flex items-center">
            <div class="w-full border-t border-gray-200"></div>
          </div>
          <div class="relative flex justify-center text-sm">
            <span class="px-4 bg-white text-gray-500">Hoặc đăng ký với</span>
          </div>
        </div>

        <div class="grid grid-cols-2 gap-3">
          <button
            type="button"
            class="w-full inline-flex justify-center items-center py-3 px-4 border border-gray-200 rounded-xl shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 hover:scale-[1.02]"
          >
            <i class="fab fa-google text-red-500 mr-2"></i>
            Google
          </button>
          <button
            type="button"
            class="w-full inline-flex justify-center items-center py-3 px-4 border border-gray-200 rounded-xl shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 hover:scale-[1.02]"
          >
            <i class="fab fa-microsoft text-blue-600 mr-2"></i>
            Microsoft
          </button>
        </div>
      </form>
    </div>

    <!-- Login Link -->
    <div class="mt-6 text-center">
      <p class="text-gray-600">
        Đã có tài khoản?
        <a
          href="/login"
          class="font-medium text-secondary hover:text-emerald-600 transition-colors"
        >
          Đăng nhập ngay
        </a>
      </p>
    </div>
  </div>
</div>
{% endblock %} {% block scripts %}
<script>
  // Password toggle functionality
  function togglePasswordField(fieldId) {
    const passwordInput = document.getElementById(fieldId);
    const toggleIcon = document.getElementById(fieldId + "Icon");

    if (passwordInput.type === "password") {
      passwordInput.type = "text";
      toggleIcon.classList.remove("fa-eye");
      toggleIcon.classList.add("fa-eye-slash");
    } else {
      passwordInput.type = "password";
      toggleIcon.classList.remove("fa-eye-slash");
      toggleIcon.classList.add("fa-eye");
    }
  }

  // Password strength checker
  function checkPasswordStrength(password) {
    let score = 0;
    if (password.length >= 8) score++;
    if (/[a-z]/.test(password)) score++;
    if (/[A-Z]/.test(password)) score++;
    if (/[0-9]/.test(password)) score++;
    if (/[^A-Za-z0-9]/.test(password)) score++;
    return Math.min(score, 4);
  }

  // Real-time validation
  document.getElementById("password").addEventListener("input", function () {
    const password = this.value;
    const strength = checkPasswordStrength(password);
    const strengthBars = ["strength1", "strength2", "strength3", "strength4"];
    const strengthText = document.getElementById("strengthText");
    const colors = [
      "bg-red-400",
      "bg-orange-400",
      "bg-yellow-400",
      "bg-green-400",
    ];
    const texts = ["Rất yếu", "Yếu", "Trung bình", "Mạnh"];

    // Reset all bars
    strengthBars.forEach((bar) => {
      document.getElementById(bar).className =
        "h-1 w-1/4 bg-gray-200 rounded-full transition-all duration-200";
    });

    // Fill bars based on strength
    for (let i = 0; i < strength; i++) {
      document.getElementById(strengthBars[i]).className = `h-1 w-1/4 ${
        colors[strength - 1]
      } rounded-full transition-all duration-200`;
    }

    strengthText.textContent =
      strength > 0 ? texts[strength - 1] : "Độ mạnh mật khẩu";
    strengthText.className = `text-xs mt-1 ${
      strength > 2
        ? "text-green-600"
        : strength > 1
        ? "text-yellow-600"
        : "text-red-600"
    }`;
  });

  // Confirm password validation
  document
    .getElementById("confirm_password")
    .addEventListener("input", function () {
      const password = document.getElementById("password").value;
      const confirmPassword = this.value;
      const feedback = document.getElementById("confirmPasswordFeedback");
      const error = document.getElementById("confirmPasswordError");

      if (confirmPassword && password === confirmPassword) {
        this.classList.remove("border-red-300");
        this.classList.add("border-green-300");
        feedback.classList.remove("hidden");
        error.classList.add("hidden");
      } else if (confirmPassword) {
        this.classList.remove("border-green-300");
        this.classList.add("border-red-300");
        feedback.classList.add("hidden");
        error.classList.remove("hidden");
        error.textContent = "Mật khẩu không khớp";
      } else {
        this.classList.remove("border-red-300", "border-green-300");
        feedback.classList.add("hidden");
        error.classList.add("hidden");
      }
    });

  // Email validation
  document.getElementById("email").addEventListener("blur", function () {
    const email = this.value;
    const feedback = document.getElementById("emailFeedback");
    const error = document.getElementById("emailError");
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

    if (email && emailRegex.test(email)) {
      this.classList.remove("border-red-300");
      this.classList.add("border-green-300");
      feedback.classList.remove("hidden");
      error.classList.add("hidden");
    } else if (email) {
      this.classList.remove("border-green-300");
      this.classList.add("border-red-300");
      feedback.classList.add("hidden");
      error.classList.remove("hidden");
      error.textContent = "Email không hợp lệ";
    }
  });

  // Full name validation
  document.getElementById("full_name").addEventListener("input", function () {
    const fullName = this.value.trim();
    const feedback = document.getElementById("fullNameFeedback");

    if (fullName.length >= 2) {
      this.classList.add("border-green-300");
      feedback.classList.remove("hidden");
    } else {
      this.classList.remove("border-green-300");
      feedback.classList.add("hidden");
    }
  });

  // Form submission validation
  document
    .getElementById("registerForm")
    .addEventListener("submit", function (e) {
      const fullName = document.getElementById("full_name").value.trim();
      const email = document.getElementById("email").value.trim();
      const password = document.getElementById("password").value;
      const confirmPassword = document.getElementById("confirm_password").value;
      const agreeTerms = document.getElementById("agree_terms").checked;

      if (!fullName || fullName.length < 2) {
        e.preventDefault();
        showNotification("Họ tên phải có ít nhất 2 ký tự", "error");
        return;
      }

      if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
        e.preventDefault();
        showNotification("Email không hợp lệ", "error");
        return;
      }

      if (!password || password.length < 8) {
        e.preventDefault();
        showNotification("Mật khẩu phải có ít nhất 8 ký tự", "error");
        return;
      }

      if (password !== confirmPassword) {
        e.preventDefault();
        showNotification("Mật khẩu xác nhận không khớp", "error");
        return;
      }

      if (!agreeTerms) {
        e.preventDefault();
        showNotification("Bạn cần đồng ý với điều khoản sử dụng", "error");
        return;
      }
    });

  // Simple notification function
  function showNotification(message, type = "info") {
    const notification = document.createElement("div");
    notification.className = `fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg z-50 ${
      type === "error" ? "bg-red-500 text-white" : "bg-green-500 text-white"
    }`;
    notification.textContent = message;
    document.body.appendChild(notification);

    setTimeout(() => {
      notification.remove();
    }, 3000);
  }
</script>
{% endblock %}
